{"ast":null,"code":"/* eslint-disable eqeqeq */\nexport class Snare {\n  constructor(ctx) {\n    this.ctx = void 0;\n    this.tone = void 0;\n    this.decay = void 0;\n    this.noise = void 0;\n    this.noiseEnvelope = void 0;\n    this.osc = void 0;\n    this.oscEnvelope = void 0;\n    this.volume = void 0;\n    this.fxAmount = void 0;\n\n    this.setTone = tone => {\n      this.tone = tone;\n    };\n\n    this.setVolume = vol => {\n      this.volume = vol;\n    };\n\n    this.setFXAmount = amount => {\n      this.fxAmount = amount;\n    };\n\n    this.ctx = ctx;\n    this.tone = 100;\n    this.decay = 0.2;\n    this.volume = 1;\n  }\n\n  setup() {\n    this.noise = this.ctx.createBufferSource();\n    this.noise.buffer = this.noiseBuffer();\n    var noiseFilter = this.ctx.createBiquadFilter();\n    noiseFilter.type = \"highpass\";\n    noiseFilter.frequency.value = 1000;\n    this.noise.connect(noiseFilter);\n    this.noiseEnvelope = this.ctx.createGain();\n    noiseFilter.connect(this.noiseEnvelope);\n    this.noiseEnvelope.connect(this.ctx.destination);\n    this.osc = this.ctx.createOscillator();\n    this.osc.type = \"triangle\";\n    this.oscEnvelope = this.ctx.createGain();\n    this.osc.connect(this.oscEnvelope);\n    this.oscEnvelope.connect(this.ctx.destination);\n  }\n\n  noiseBuffer() {\n    var bufferSize = this.ctx.sampleRate;\n    var buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);\n    var output = buffer.getChannelData(0);\n\n    for (var i = 0; i < bufferSize; i++) {\n      output[i] = Math.random() * 2 - 1;\n    }\n\n    return buffer;\n  }\n\n  trigger(time) {\n    if (this.volume == 0) {\n      return;\n    }\n\n    this.setup();\n    this.noiseEnvelope.gain.setValueAtTime(this.volume, time);\n    this.noiseEnvelope.gain.exponentialRampToValueAtTime(0.01, time + this.decay);\n    this.noise.start(time);\n    this.osc.frequency.setValueAtTime(this.tone, time);\n    this.oscEnvelope.gain.setValueAtTime(0.7 * this.volume, time);\n    this.oscEnvelope.gain.exponentialRampToValueAtTime(0.01 * this.volume, time + this.decay / 2);\n    this.osc.start(time);\n    this.osc.stop(time + this.decay);\n    this.noise.stop(time + this.decay);\n  }\n\n}","map":{"version":3,"sources":["/Users/reanova/Desktop/testfinal/my-app/src/engines/snare.ts"],"names":["Snare","constructor","ctx","tone","decay","noise","noiseEnvelope","osc","oscEnvelope","volume","fxAmount","setTone","setVolume","vol","setFXAmount","amount","setup","createBufferSource","buffer","noiseBuffer","noiseFilter","createBiquadFilter","type","frequency","value","connect","createGain","destination","createOscillator","bufferSize","sampleRate","createBuffer","output","getChannelData","i","Math","random","trigger","time","gain","setValueAtTime","exponentialRampToValueAtTime","start","stop"],"mappings":"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","sourcesContent":["/* eslint-disable eqeqeq */\nimport { InstrumentEngine } from \"./engines\";\n\nexport class Snare implements InstrumentEngine {\n    private ctx: AudioContext;\n    public tone: number;\n    public decay: number;\n    private noise!: AudioBufferSourceNode;\n    private noiseEnvelope!: GainNode;\n    private osc!: OscillatorNode;\n    private oscEnvelope!: GainNode;\n    public volume: number;\n    public fxAmount!: number;\n    constructor(ctx) {\n        this.ctx = ctx;\n        this.tone = 100;\n        this.decay = 0.2;\n        this.volume = 1;\n    }\n\n    setup() {\n        this.noise = this.ctx.createBufferSource();\n        this.noise.buffer = this.noiseBuffer();\n\n        var noiseFilter = this.ctx.createBiquadFilter();\n        noiseFilter.type = \"highpass\";\n        noiseFilter.frequency.value = 1000;\n        this.noise.connect(noiseFilter);\n\n        this.noiseEnvelope = this.ctx.createGain();\n        noiseFilter.connect(this.noiseEnvelope);\n\n        this.noiseEnvelope.connect(this.ctx.destination);\n\n        this.osc = this.ctx.createOscillator();\n        this.osc.type = \"triangle\";\n\n        this.oscEnvelope = this.ctx.createGain();\n        this.osc.connect(this.oscEnvelope);\n        this.oscEnvelope.connect(this.ctx.destination);\n    }\n\n    noiseBuffer() {\n        var bufferSize = this.ctx.sampleRate;\n        var buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate);\n        var output = buffer.getChannelData(0);\n\n        for (var i = 0; i < bufferSize; i++) {\n            output[i] = Math.random() * 2 - 1;\n        }\n\n        return buffer;\n    }\n\n    trigger(time: number) {\n        if (this.volume == 0) {\n            return;\n        }\n        this.setup();\n        this.noiseEnvelope.gain.setValueAtTime(this.volume, time);\n        this.noiseEnvelope.gain.exponentialRampToValueAtTime(\n            0.01,\n            time + this.decay\n        );\n        this.noise.start(time);\n\n        this.osc.frequency.setValueAtTime(this.tone, time);\n        this.oscEnvelope.gain.setValueAtTime(0.7 * this.volume, time);\n        this.oscEnvelope.gain.exponentialRampToValueAtTime(\n            0.01 * this.volume,\n            time + this.decay / 2\n        );\n        this.osc.start(time);\n\n        this.osc.stop(time + this.decay);\n        this.noise.stop(time + this.decay);\n    }\n\n    setTone = (tone: number) => {\n        this.tone = tone;\n    };\n    setVolume = (vol: number) => {\n        this.volume = vol;\n    };\n    setFXAmount = (amount: number) => {\n        this.fxAmount = amount;\n    };\n}\n"]},"metadata":{},"sourceType":"module"}